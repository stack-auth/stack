---
slug: concepts/orgs-and-teams
subtitle: Manage teams and team members
---

Teams are a structured way to group users and manage their permissions. Users can belong to multiple teams at the same time, so they can represent departments, B2B customers, or projects.

The server can perform all the operations on a team, but the client can only perform some actions if the user has the corresponding permissions. This applies to all the actions that can be performed on a server/client side `User` object and a `Team` object. 

<Note>
If you try to perform an action that the user does not have the team permission to, the function will through an error. You should always check if the user has the permission before performing the action. Learn more about permissions [here](permissions.mdx).
</Note>

## Retrieving a user's teams

You can list all teams that a user is a member of with the `listTeams` or `useTeams` functions, or get a specific one with `getTeam` or `useTeam`. This works on clients and servers.

<Tabs>
  <Tab title="Client Component">
    ```tsx
    const user = useUser({ or: 'redirect' });
    const allTeams = user.useTeams();
    const someTeam = user.useTeam('some-team-id'); // may be null if the user is not a member of this team

    return (
      <div>
        {allTeams.map(team => (
          <div key={team.id}>{team.displayName}</div>
        ))}
      </div>
      <div>
        {someTeam ? team.displayName : 'Not a member of this team'}
      </div>
    );
    ```
  </Tab>

  <Tab title="Server Component">
    ```tsx
    const user = await stackServerApp.getUser({ or: 'redirect' });
    const allTeams = await user.listTeams();
    const someTeam = await user.getTeam('some-team-id'); // may be null if the user is not a member of this team

    return (
      <div>
        {allTeams.map(team => (
          <div key={team.id}>{team.displayName}</div>
        ))}
      </div>
      <div>
        {someTeam ? team.displayName : 'Not a member of this team'}
      </div>
    );
    ```
  </Tab>
</Tabs>

## Creating a team

To create a team and add/remove users, `createTeam` function on the `User` object. The user will be added to the team with the team creator permissions.

On the client side, this requires the "client side team creation" switch be enabled on the stack dashboard.

```jsx
const team = await user.createTeam({
  displayName: 'New Team',
});
```

If you want to create a team on the server without a user, you can use the `createTeam` function on the `ServerApp` object:

```jsx
const team = await stackServerApp.createTeam({
  displayName: 'New Team',
});
```

## Updating a team

You can update the team with the `update` function on the `Team` object.

On the clinet, the user must have the `$update_team` permission in the team to perform this action.


<Tabs>
  <Tab title="Client Component">
    ```tsx
    const user = useUser({ or: 'redirect' });
    const team = user.useTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }

    const hasPermission = user.hasPermission(team, '$update_team');

    if (!hasPermission) {
      return <div>You don't have permission to update this team</div>;
    }

    return (
      <button onClick={async () => {
        await team.update({
          displayName: 'New Team Name',
        });
      }}>
        Update Team
      </button>
    )
    ```
  </Tab>

  <Tab title="Server Component">
    ```tsx
    const user = await stackServerApp.getUser({ or: 'redirect' });
    const team = await user.getTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }
    
    await team.update({
      displayName: 'New Team Name',
    });
    ```
  </Tab>
</Tabs>

## Custom team metadata

You can store custom metadata on a team object (similar to the user object). The metadata can ba any JSON object.

`clientMetadata`: Can be read and updated on the client side and server side.
`serverMetadata`: Can only be read and updated on the server side.
`clientReadOnlyMetadata`: Can be read on the client side and server side, but can only be updated on the server side.

```tsx
await team.update({
  clientMetadata: {
    customField: 'value',
  },
});

console.log(team.clientMetadata.customField); // 'value'
```

## List users in a team

You can list all users in a team with the `listUsers` function on the `Team` object.

On the client, the current user must have the `$read_members` permission in the team to perform this action.

<Tabs>
  <Tab title="Client Component">
    ```tsx
    const user = useUser({ or: 'redirect' });
    const team = user.useTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }

    const hasPermission = user.hasPermission(team, '$read_members');

    if (!hasPermission) {
      return <div>You don't have permission to read members of this team</div>;
    }

    const users = team.useUsers();

    return (
      <div>
        {users.map(user => (
          <div key={user.id}>{user.displayName}</div>
        ))}
      </div>
    )
    ```
  </Tab>

  <Tab title="Server Component">
    ```tsx
    const user = await stackServerApp.getUser({ or: 'redirect' });
    const team = await user.getTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }

    const users = await team.listUsers();
    
    return (
      <div>
        {users.map(user => (
          <div key={user.id}>{user.displayName}</div>
        ))}
      </div>
    )
    ```
  </Tab>
</Tabs>

## Invite a user to a team

You can invite a user to a team with the `inviteUser` function on the `Team` object. The user will receive an email with a link to join the team.

On the client side, the current user must have the `$invite_members` permission in the team to perform this action.

```tsx
await team.inviteUser({ email: 'example@email.com' });
```

## Add a user to a team

If you want to add a user to a team without sending an email, you can use the `addUser` function on the `ServerTeam` object. This function can only be called on the server side.

```tsx
await team.addUser(user);
```

## Remove a user from a team

You can remove a user from a team with the `removeUser` function on the `Team` object.

On the client side, the current user must have the `$remove_members` permission in the team to perform this action.

```tsx
await team.removeUser(user);
```

## Leave the current team

All users can leave the current team without any permissions required.

```tsx
const team = await user.getTeam('some-team-id');
await user.leaveTeam(team);
```

## Delete a team

You can delete a team with the `delete` function on the `Team` object.

On the client side, the current user must have the `$delete_team` permission in the team to perform this action.

<Tabs>
  <Tab title="Client Component">
    ```tsx
    const user = useUser({ or: 'redirect' });
    const team = user.useTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }

    const hasPermission = user.hasPermission(team, '$delete_team');

    if (!hasPermission) {
      return <div>You don't have permission to delete this team</div>;
    }

    return (
      <button onClick={async () => {
        await team.delete();
      }}>
        Delete Team
      </button>
    )
    ```
  </Tab>

  <Tab title="Server Component">
    ```tsx
    const user = await stackServerApp.getUser({ or: 'redirect' });
    const team = await user.getTeam('some-team-id');

    if (!team) {
      return <div>Team not found</div>;
    }

    await team.delete();
    ```
  </Tab>
</Tabs>