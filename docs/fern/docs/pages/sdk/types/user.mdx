---
slug: sdk/types/user
---

<Markdown src="../../snippets/make-full-page.mdx" />
<div className="stack-aside-container"><div className="stack-content">

This is a detailed reference for the `User` object. If you're looking for a more high-level overview, please refer to our guide on users [here](../../getting-started/users.mdx).

On this page:
- [CurrentUser](#currentuser)
- [ServerUser](#serveruser)
- [CurrentServerUser](#currentserveruser)

</div><div className="stack-full-size">
<Markdown src="../../snippets/big-divider.mdx" />

# `CurrentUser`
</div><div className="stack-content">

You can call `useUser()` or `stackServerApp.getUser()` to get the `CurrentUser` object.

### Table of Contents

```typescript maxLines=50
type CurrentUser = {
  id: string; //$stack-link-to:#currentuserid
  displayName: string | null; //$stack-link-to:#currentuserdisplayname
  primaryEmail: string | null; //$stack-link-to:#currentuserprimaryemail
  primaryEmailVerified: boolean; //$stack-link-to:#currentuserprimaryemailverified
  profileImageUrl: string | null; //$stack-link-to:#currentuserprofileimageurl
  signedUpAt: Date; //$stack-link-to:#currentusersignedupat
  hasPassword: boolean; //$stack-link-to:#currentuserhaspassword
  clientMetadata: Json; //$stack-link-to:#currentuserclientmetadata
  clientReadOnlyMetadata: Json; //$stack-link-to:#currentuserclientreadonlymetadata
  selectedTeam: Team | null; //$stack-link-to:#currentuserselectedteam

  update(data): Promise<void>; //$stack-link-to:#currentuserupdatedata
  updatePassword(data): Promise<void>; //$stack-link-to:#currentuserupdatepassworddata
  getAuthHeaders(): Promise<Record<string, string>>; //$stack-link-to:#currentusergetauthheaders
  getAuthJson(): Promise<{ accessToken: string | null }>; //$stack-link-to:#currentusergetauthjson
  signOut([options]): Promise<void>; //$stack-link-to:#currentusersignoutoptions
  delete(): Promise<void>; //$stack-link-to:#currentuserdelete

  getTeam(id): Promise<Team | null>; //$stack-link-to:#currentusergetteamid
   ⤷ useTeam(id): Team | null; //$stack-link-to:#currentuseruseteamid
  listTeams(): Promise<Team[]>; //$stack-link-to:#currentuserlistteams
   ⤷ useTeams(): Team[]; //$stack-link-to:#currentuseruseteams
  setSelectedTeam(team): Promise<void>; //$stack-link-to:#currentusersetselectedteamteam
  createTeam(data): Promise<Team>; //$stack-link-to:#currentusercreateteamdata
  leaveTeam(team): Promise<void>; //$stack-link-to:#currentuserleaveteamteam
  getTeamProfile(team): Promise<EditableTeamMemberProfile>; //$stack-link-to:#currentusergetteamprofileteam
   ⤷ useTeamProfile(team): EditableTeamMemberProfile; //$stack-link-to:#currentuseruseteamprofileteam

  hasPermission(scope, permissionId): Promise<boolean>; //$stack-link-to:#currentuserhaspermissionscope-permissionid
  getPermission(scope, permissionId[, options]): Promise<TeamPermission | null>; //$stack-link-to:#currentusergetpermissionscope-permissionid-options
   ⤷ usePermission(scope, permissionId[, options]): TeamPermission | null; //$stack-link-to:#currentuserusepermissionscope-permissionid-options
  listPermissions(scope[, options]): Promise<TeamPermission[]>; //$stack-link-to:#currentuserlistpermissionsscope-options
   ⤷ usePermissions(scope[, options]): TeamPermission[]; //$stack-link-to:#currentuserusepermissionsscope-options

  listContactChannels(): Promise<ContactChannel[]>; //$stack-link-to:#currentuserlistcontactchannels
   ⤷ useContactChannels(): ContactChannel[]; //$stack-link-to:#currentuserusecontactchannels
};
```

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `currentUser.id`
</div><div className="stack-content">

The user ID as a `string`. This is the unique identifier of the user.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const id: string;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.displayName`
</div><div className="stack-content">

The display name of the user as a `string` or `null` if not set. The user can modify this value.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const displayName: string | null;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.primaryEmail`
</div><div className="stack-content">

The primary email of the user as a `string` or `null`. Note that this is not necessarily unique.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const primaryEmail: string | null;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.primaryEmailVerified`
</div><div className="stack-content">

A `boolean` indicating whether the primary email of the user is verified.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const primaryEmailVerified: boolean;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.profileImageUrl`
</div><div className="stack-content">

The profile image URL of the user as a `string` or `null` if no profile image is set.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const profileImageUrl: string | null;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.signedUpAt`
</div><div className="stack-content">

The date and time when the user signed up, as a `Date`.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const signedUpAt: Date;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.hasPassword`
</div><div className="stack-content">

A `boolean` indicating whether the user has a password set.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const hasPassword: boolean;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.clientMetadata`
</div><div className="stack-content">

The client metadata of the user as an `object`. This metadata is visible on the client side but should not contain sensitive or server-only information.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const clientMetadata: Json;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.clientReadOnlyMetadata`
</div><div className="stack-content">

Read-only metadata visible on the client side. This metadata can only be modified on the server side.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const clientReadOnlyMetadata: Json;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.selectedTeam`
</div><div className="stack-content">

The currently selected team for the user, if applicable, as a `Team` object or `null` if no team is selected.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const selectedTeam: Team | null;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.update(data)`
</div><div className="stack-content">

Updates the user information.

### Parameters

<div className="indented">
  <ParamField path="data" type="object" required>
    The fields to update.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="displayName" type="string">
        The new display name for the user.
      </ParamField>
      <ParamField path="clientMetadata" type="object">
        Custom metadata visible to the client.
      </ParamField>
      <ParamField path="selectedTeamId" type="string | null">
        The ID of the team to set as selected, or `null` to clear selection.
      </ParamField>
      <ParamField path="profileImageUrl" type="string | null">
        The URL of the user's new profile image, or `null` to remove it.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function update(data: {
  displayName?: string;
  clientMetadata?: Json;
  selectedTeamId?: string | null;
  profileImageUrl?: string | null;
}): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Updating user details
await user.update({
  displayName: "New Display Name",
  clientMetadata: {
    address: "123 Main St",
  },
});
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `currentUser.getTeam(id)`
</div><div className="stack-content">

Gets the team with the specified ID.

### Parameters

<div className="indented">
  <ParamField path="id" type="string" required>
    The ID of the team to get.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<Team | null>`: The team object, or `null` if the team is not found or the user is not a member of the team.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function getTeam(id: string): Promise<Team | null>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Getting a team by ID
const team = await user.getTeam("teamId");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.useTeam(id)`
</div><div className="stack-content">

Gets the team with the given ID. This is the same as `getTeam` but is used as a React hook.

### Parameters

<div className="indented">
  <ParamField path="id" type="string" required>
    The ID of the team to get.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Team | null`: The team object, or `null` if the team is not found or the user is not a member of the team.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function useTeam(id: string): Team | null;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using a team in a React component
const team = user.useTeam("teamId");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.listTeams()`
</div><div className="stack-content">

Lists all the teams the user is a member of.

### Parameters

<div className="indented">
  None.
</div>

### Returns

<div className="indented">
  `Promise<Team[]>`: The list of teams.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function listTeams(): Promise<Team[]>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Listing all teams
const teams = await user.listTeams();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.useTeams()`
</div><div className="stack-content">

Lists all the teams the user is a member of. This is the same as `listTeams` but is used as a React hook.

### Parameters

<div className="indented">
  None.
</div>

### Returns

<div className="indented">
  `Team[]`: The list of teams.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function useTeams(): Team[];
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using teams in a React component
const teams = user.useTeams();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.setSelectedTeam(team)`
</div><div className="stack-content">

Sets the currently selected team for the user.

### Parameters

<div className="indented">
  <ParamField path="team" type="Team | null" required>
    The team to set as selected, or `null` to clear selection.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function setSelectedTeam(team: Team | null): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Setting the selected team
const team = await user.getTeam("team_id_123");
await user.setSelectedTeam(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.createTeam(data)`
</div><div className="stack-content">

Creates a new team for the user. The user will be added to the team and given creator permissions.

**Note**: If client-side team creation is disabled in the Stack dashboard, this will throw an error.

### Parameters

<div className="indented">
  <ParamField path="data" type="object" required>
    The data for creating the team.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="displayName" type="string">
        The display name for the team.
      </ParamField>
      <ParamField path="profileImageUrl" type="string | null">
        The URL of the team's profile image, or `null` to remove it.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<Team>`: The created team.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function createTeam(data: {
  displayName: string;
  profileImageUrl?: string | null;
}): Promise<Team>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Creating a new team
const team = await user.createTeam({
  displayName: "New Team",
  profileImageUrl: "https://example.com/profile.jpg",
});
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `currentUser.leaveTeam(team)`
</div><div className="stack-content">

Allows the user to leave a team. If the user is not a member of the team, this will throw an error.

### Parameters

<div className="indented">
  <ParamField path="team" type="Team" required>
    The team to leave.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function leaveTeam(team: Team): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Leaving a team
await user.leaveTeam(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.getTeamProfile(team)`
</div><div className="stack-content">

Retrieves the user's profile within a specific team.

### Parameters

<div className="indented">
  <ParamField path="team" type="Team" required>
    The team to retrieve the profile for.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<EditableTeamMemberProfile>`: The user's editable profile for the specified team.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function getTeamProfile(team: Team): Promise<EditableTeamMemberProfile>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Getting a team profile
const profile = await user.getTeamProfile(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.useTeamProfile(team)`
</div><div className="stack-content">

Retrieves the user's profile within a specific team. This is the same as `getTeamProfile` but is used as a React hook.

### Parameters

<div className="indented">
  <ParamField path="team" type="Team" required>
    The team to retrieve the profile for.
  </ParamField>
</div>

### Returns

<div className="indented">
  `EditableTeamMemberProfile`: The user's editable profile for the specified team.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function useTeamProfile(team: Team): EditableTeamMemberProfile;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using a team profile in React
const profile = user.useTeamProfile(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.hasPermission(scope, permissionId)`
</div><div className="stack-content">

Checks if the user has a specific permission for a team.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to check the permission for.
  </ParamField>
  <ParamField path="permissionId" type="string" required>
    The ID of the permission to check.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<boolean>`: Whether the user has the specified permission.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function hasPermission(scope: Team, permissionId: string): Promise<boolean>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Checking user permission
const hasPermission = await user.hasPermission(team, "permissionId");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.getPermission(scope, permissionId, options?)`
</div><div className="stack-content">

Retrieves a specific permission for a user within a team.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to retrieve the permission for.
  </ParamField>
  <ParamField path="permissionId" type="string" required>
    The ID of the permission to retrieve.
  </ParamField>
  <ParamField path="options" type="object">
    An object containing multiple properties.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="recursive" type="boolean">
        Whether to retrieve the permission recursively. Default is `true`.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<TeamPermission | null>`: The permission object, or `null` if not found.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function getPermission(scope: Team, permissionId: string, options?: { recursive?: boolean }): Promise<TeamPermission | null>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Getting a permission
const permission = await user.getPermission(team, "read_secret_info");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.usePermission(scope, permissionId, options?)`
</div><div className="stack-content">

Retrieves a specific permission for a user within a team, used as a React hook.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to retrieve the permission for.
  </ParamField>
  <ParamField path="permissionId" type="string" required>
    The ID of the permission to retrieve.
  </ParamField>
  <ParamField path="options" type="object">
    An object containing multiple properties.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="recursive" type="boolean">
        Whether to retrieve the permission recursively. Default is `true`.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `TeamPermission | null`: The permission object, or `null` if not found.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function usePermission(scope: Team, permissionId: string, options?: { recursive?: boolean }): TeamPermission | null;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using a permission in React
const permission = user.usePermission(team, "read_secret_info");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.listPermissions(scope[, options])`
</div><div className="stack-content">

Lists all permissions the user has for a specified team.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to list permissions for.
  </ParamField>
  <ParamField path="options" type="object">
    An object containing multiple properties.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="recursive" type="boolean">
        Whether to list the permissions recursively. Default is `true`.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<TeamPermission[]>`: An array of permissions.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function listPermissions(scope: Team, options?: { recursive?: boolean }): Promise<TeamPermission[]>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Listing user permissions
const permissions = await user.listPermissions(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.usePermissions(scope, options?)`
</div><div className="stack-content">

Lists all permissions the user has for a specified team, used as a React hook.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to retrieve permissions for.
  </ParamField>
  <ParamField path="options" type="object">
    An object containing multiple properties.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="recursive" type="boolean">
        Whether to list the permissions recursively. Default is `true`.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `TeamPermission[]`: An array of permissions.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function usePermissions(scope: Team, options?: { recursive?: boolean }): TeamPermission[];
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using permissions in a React component
const permissions = user.usePermissions(team);
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.listContactChannels()`
</div><div className="stack-content">

Lists all the contact channels of the user.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `Promise<ContactChannel[]>`: An array of contact channels.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function listContactChannels(): Promise<ContactChannel[]>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Listing contact channels
const contactChannels = await user.listContactChannels();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.useContactChannels()`
</div><div className="stack-content">

Lists all the contact channels of the user, used as a React hook.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `ContactChannel[]`: An array of contact channels.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function useContactChannels(): ContactChannel[];
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Using contact channels in React
const contactChannels = user.useContactChannels();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.updatePassword(data)`
</div><div className="stack-content">

Updates the user's password.

### Parameters

<div className="indented">
  <ParamField path="data" type="object" required>
    The fields required for updating the password.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="oldPassword" type="string" required>
        The current password of the user.
      </ParamField>
      <ParamField path="newPassword" type="string" required>
        The new password for the user.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function updatePassword(data: {
  oldPassword: string;
  newPassword: string;
}): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Updating user password
const result = await user.updatePassword({
  oldPassword: "currentPassword",
  newPassword: "newPassword",
});
if (result.status === "error") {
  console.error("Error updating password", result.error);
} else {
  console.log("Password updated");
}
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `currentUser.getAuthHeaders()`
</div><div className="stack-content">

Returns headers for sending authenticated HTTP requests to external servers. Most commonly used in cross-origin
requests. Similar to `getAuthJson`, but specifically for HTTP requests.

If you are using `tokenStore: "cookie"`, you don't need this for same-origin requests. However, most
browsers now disable third-party cookies by default, so we must pass authentication tokens by header instead
if the client and server are on different hostnames.

This function returns a header object that can be used with `fetch` or other HTTP request libraries to send
authenticated requests.

On the server, you can then pass in the `Request` object to the `tokenStore` option
of your Stack app. Please note that CORS does not allow most headers by default, so you
must include `x-stack-auth` in the [`Access-Control-Allow-Headers` header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Headers)
of the CORS preflight response.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `Promise<Record<string, string>>`: An object containing the authentication headers.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function getAuthHeaders(): Promise<Record<string, string>>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Passing auth headers to an external server
// client
const res = await fetch("https://api.example.com", {
  headers: {
    ...await stackApp.getAuthHeaders()
    // you can also add your own headers here
  },
});

// server
function handleRequest(req: Request) {
  const user = await stackServerApp.getUser({ tokenStore: req });
  return new Response("Welcome, " + user.displayName);
}
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.getAuthJson()`
</div><div className="stack-content">

Creates a JSON-serializable object containing the information to authenticate a user on an external server.

While `getAuthHeaders` is the recommended way to send authentication tokens over HTTP, your app may use
a different protocol, for example WebSockets or gRPC. This function returns a token object that can be JSON-serialized and sent to the server in any way you like.

On the server, you can pass in this token object into the `tokenStore` option to fetch user details.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `Promise<{ accessToken: string | null }>`: An object containing the access token.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function getAuthJson(): Promise<{ accessToken: string | null }>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Passing auth tokens over an RPC call
// client
const res = await rpcCall(rpcEndpoint, {
  data: {
    auth: await stackApp.getAuthJson(),
  },
});

// server
function handleRequest(data) {
  const user = await stackServerApp.getUser({ tokenStore: data.auth });
  return new Response("Welcome, " + user.displayName);
}
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.signOut(options)`
</div><div className="stack-content">

Signs out the user and clears the session.

### Parameters

<div className="indented">
  <ParamField path="options" type="object">
    An object containing multiple properties.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="redirectUrl" type="string">
        The URL to redirect to after signing out. Defaults to the `afterSignOut` URL from the Stack app's `urls` object.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function signOut(options?: { redirectUrl?: string }): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Signing out
await user.signOut();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `currentUser.delete()`
</div><div className="stack-content">

Deletes the user. This action is irreversible and can only be used if client-side user deletion is enabled in the Stack dashboard.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function delete(): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Deleting the user
await user.delete();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/big-divider.mdx" />


# `ServerUser`
</div><div className="stack-content">

The `ServerUser` object contains most `CurrentUser` properties and methods with the exception of those that require an active session (`getAuthJson` and `signOut`). It also contains some additional functions that require [server-level permissions](../../concepts/stack-app.mdx#client-vs-server).



### Table of Contents

```typescript
type ServerUser = 
  // Inherits most functionality from CurrentUser
  & Omit<CurrentUser, "getAuthJson" | "signOut">  //$stack-link-to:#currentuser
  & {
    lastActiveAt: Date; //$stack-link-to:#serveruserlastactiveat
    serverMetadata: Json; //$stack-link-to:#serveruserservermetadata

    update(data): Promise<void>; //$stack-link-to:#serveruserupdatedata

    listContactChannels(): Promise<ContactChannel[]>; //$stack-link-to:#serveruserlistcontactchannels
     ⤷ useContactChannels(): ContactChannel[]; //$stack-link-to:#serveruserusecontactchannels

    grantPermission(scope, permissionId): Promise<void>; //$stack-link-to:#serverusergrantpermissionscope-permissionid
    revokePermission(scope, permissionId): Promise<void>; //$stack-link-to:#serveruserrevokepermissionscope-permissionid
  };
```

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `serverUser.lastActiveAt`
</div><div className="stack-content">

The last active date and time of the user as a `Date`.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const lastActiveAt: Date;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `serverUser.serverMetadata`
</div><div className="stack-content">

The server metadata of the user, accessible only on the server side.

</div><div className="stack-aside"><div className="stack-sticky">
### Type Definition

```typescript
declare const serverMetadata: Json;
```
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `serverUser.update(data)`
</div><div className="stack-content">

Updates the user's information on the server side. This is similar to the `CurrentUser.update()` method but includes additional capabilities, such as updating server metadata or setting a new password directly.

### Parameters

<div className="indented">
  <ParamField path="data" type="object" required>
    The fields to update.
    <Accordion title={<span className="accordion-show-properties" />}>
      <ParamField path="displayName" type="string">
        The new display name for the user.
      </ParamField>
      <ParamField path="primaryEmail" type="string">
        The new primary email for the user.
      </ParamField>
      <ParamField path="primaryEmailVerified" type="boolean">
        Whether the primary email is verified.
      </ParamField>
      <ParamField path="primaryEmailAuthEnabled" type="boolean">
        Whether auth should be enabled for the primary email.
      </ParamField>
      <ParamField path="password" type="string">
        The new password for the user.
      </ParamField>
      <ParamField path="selectedTeamId" type="string | null">
        The ID of the team to set as selected, or `null` to clear selection.
      </ParamField>
      <ParamField path="profileImageUrl" type="string | null">
        The URL of the user's new profile image, or `null` to remove.
      </ParamField>
      <ParamField path="clientMetadata" type="object">
        Metadata visible on the client side.
      </ParamField>
      <ParamField path="clientReadOnlyMetadata" type="object">
        Metadata that is read-only on the client but modifiable on the server side.
      </ParamField>
      <ParamField path="serverMetadata" type="object">
        Metadata only accessible and modifiable on the server side.
      </ParamField>
    </Accordion>
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function update(data: {
  displayName?: string;
  profileImageUrl?: string | null;
  primaryEmail?: string,
  primaryEmailVerified?: boolean,
  primaryEmailAuthEnabled?: boolean,
  password?: string;
  selectedTeamId?: string | null;
  clientMetadata?: Json;
  clientReadOnlyMetadata?: Json;
  serverMetadata?: Json;
}): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Updating user details on the server
await serverUser.update({
  displayName: "Updated Display Name",
  password: "newSecurePassword",
  serverMetadata: {
    internalNote: "Confidential information",
  },
});
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `serverUser.listContactChannels()`
</div><div className="stack-content">

Lists all the contact channels of the user on the server side. This is similar to `CurrentUser.listContactChannels()` but returns a list of `ServerContactChannel` objects, which may include additional server-only details.

### Parameters

<div className="indented">
  No parameters.
</div>

### Returns

<div className="indented">
  `Promise<ServerContactChannel[]>`: An array of server-specific contact channels.
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function listContactChannels(): Promise<ServerContactChannel[]>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Listing server-specific contact channels
const contactChannels = await serverUser.listContactChannels();
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

## `serverUser.useContactChannels()`
</div><div className="stack-content">

<Markdown src="../../snippets/use-on-server-callout.mdx" />

Functionally equivalent to [`listContactChannels()`](#serveruserlistcontactchannels), but as a React hook.

</div><div className="stack-full-size">

<Markdown src="../../snippets/divider.mdx" />

## `serverUser.grantPermission(scope, permissionId)`
</div><div className="stack-content">

Grants a specific permission to the user for a given team.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to grant the permission for.
  </ParamField>
  <ParamField path="permissionId" type="string" required>
    The ID of the permission to grant.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function grantPermission(scope: Team, permissionId: string): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Granting permission to a user
await serverUser.grantPermission(team, "read_secret_info");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />


## `serverUser.revokePermission(scope, permissionId)`
</div><div className="stack-content">

Revokes a specific permission from the user for a given team.

### Parameters

<div className="indented">
  <ParamField path="scope" type="Team" required>
    The team to revoke the permission from.
  </ParamField>
  <ParamField path="permissionId" type="string" required>
    The ID of the permission to revoke.
  </ParamField>
</div>

### Returns

<div className="indented">
  `Promise<void>`
</div>

</div><div className="stack-aside"><div className="stack-sticky">
### Signature

```typescript
declare function revokePermission(scope: Team, permissionId: string): Promise<void>;
```

### Examples

<div className="small-codeblock-tabs"><CodeBlocks>
```typescript Revoking permission from a user
await serverUser.revokePermission(team, "read_secret_info");
```
<Markdown src="../../snippets/always-tab-codeblock.mdx" /></CodeBlocks></div>
</div></div><div className="stack-content">

</div><div className="stack-full-size">
<Markdown src="../../snippets/big-divider.mdx" />


# `CurrentServerUser`
</div><div className="stack-content">

The `CurrentServerUser` object combines all the properties and methods of both `CurrentUser` and `ServerUser`. You can obtain a `CurrentServerUser` by calling `stackServerApp.getUser()` on the server side.

### Table of Contents

```typescript
type CurrentServerUser =
  // Inherits all functionality from CurrentUser
  & CurrentUser  //$stack-link-to:#currentuser
  // Inherits all functionality from ServerUser
  & ServerUser;  //$stack-link-to:#serveruser
```

</div><div className="stack-full-size">
<Markdown src="../../snippets/divider.mdx" />

</div></div>
